{% extends "base.html" %}

{% block title %}
        Authentication | Blogarithm
{% endblock %}

{% block stylesheets %}
				
				<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
				<link rel="preconnect" href="https://fonts.gstatic.com">
				<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet"> 
				<link rel="stylesheet" href="/static/css/auth.css">
{% endblock %}

{% block js_libs %}

<script src="https://kit.fontawesome.com/e455f2df59.js" crossorigin="anonymous"></script>

{% endblock %} 

{% block navbar %}
	{# no navbar #}
{% endblock %} 

{% block hamburger_menu %}
	{# no hamburger #}
{% endblock %}				


{% block content %}
			<main> 
				{% with messages = get_flashed_messages() %}
					{% if messages %}
						{% for message in messages %}
						 <div class="alert">
								<span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
								{{ message }}
							</div> 
						{% endfor %}
					{% endif %}
				{% endwith %}
			
				<div class="main-area"> 
						<div class="tabs">
							  <ul>
								<li class="is-active tabby"><a id="login" onclick="tabchange(this.id)">LOGIN</a></li>
								<li class="tabby"><a id="signup" onclick="tabchange(this.id)">SIGN UP</a></li>
								
							  </ul>
						</div>
						<div class="signup" style="display: none">
							<form action="/auth/register" method="POST">
							<div class="page-1">
								<div class="field">
								  
								  <div class="control">
									<input required class="input" name="email" type="email" value="{{email}}" placeholder="your-email-id@email" onfocus="reEditReg(this)">
								  </div>
								</div>

								<div class="field">
									<div class="control">
										<input required class="input" name="name" type="text" value="{{name}}" placeholder="Your Name" onfocus="reEditReg(this)">
									</div>
								</div>
																
								<div class="field">
								  
								  <div class="control">
									<input required class="input" name="password" type="password" placeholder="Password" onfocus="reEditReg(this)">
								  </div>
								</div>
								
								<div class="field">
								  
								  <div class="control">
									<input required class="input" name="password" type="password" placeholder="Confirm Password" onfocus="reEditReg(this)">
								  </div>
								</div>
							
							
							    <input type="hidden" name="next" value="{{next}}">

									<p id="warn" style="color: red"></p>

								<button type="button" class="button is-primary is-medium" onclick="getOTP(this)"> Next </button>
							</div>
						
							<div class="page-2">
								<div class="field" >
									  
									  <div class="control">
										<input required class="input" name="otp" type="text" placeholder="ENTER OTP">
									  </div>
								</div>
								<input type="hidden" name="hashed-otp">
								
								
								<button type="submit" class="button is-success is-medium">Sign up</button>
								
								<button type='button' class="button is-info is-medium" onclick="resend(this , 0)"> Resend(2)</button>
							</div>
						</form>
						
						
						</div>
						
						
						
						<div class="login">
						    <form method="POST" action="/auth/login">

							    <div class="field">
								      
								    <div class="control">
								        <input required class="input" name="email" type="email" placeholder="your-email-id@email" value="{{logemail}}">
								    </div>
							    </div>

                                <div class="field">
								  
								  <div class="control">
									<input required class="input" name="password" type="password" placeholder="Password">
								  </div>
								</div>

							    <input type="hidden" name="next" value="{{next}}">
								
								<a onclick="enable()" >
									<p style="font-family: 'Montserrat', sans-serif; font-weight : bold; margin-bottom : 5px;"> FORGOT PASSWORD  </p> 
								</a>

								<button type="submit" class="button is-primary is-medium" methid="post" action="/auth/login"> Login </button>

						    </form>
						
						
						</div>
				
						
				
				</div>
				
				
				<div class="modal">
					<div class="modal-background"></div>
					<div class="modal-card">
						<header class="modal-card-head">
							<p class="modal-card-title">RESET PASSWORD</p>
							<button class="delete" aria-label="close" onclick="disable()" ></button>
						</header>
						
						<section class="modal-card-body">
								<div class="field">
									<div class="control">
										<input type="email"  id="email" name="email" required class="input" placeholder="Enter your registered email id">
									</div>
								</div>
								
								
								<button class="button is-success" id="send_otp" onclick="sendresetotp()">SEND OTP</button> 
								
								
								<div class="field">
									<div class="control">
										<input type="text" id="reset-otp" required class="input" placeholder="Enter OTP" style="display :none;">
									</div>
								</div>
								
								<div class="field">
									<div class="control">
										<input type="hidden" >
									</div>
								</div> 
								
								<div class="field">
									<div class="control">
										<input type="password" id="newpassword" name="password" required class="input" placeholder="Enter new password" style="display :none;">
									</div>
								</div>
								
								<div class="field">
									<div class="control">
										<input type="password" id="confirmpassword" required class="input" placeholder="Confirm password" style="display :none;">
									</div>
								</div>
								
						</section>
					
						<footer class="modal-card-foot">
							<button class="button is-success" id="save" style="display :none;">Save</button>
						</footer>
						
					</div>
				</div>
				
				
				
				<div class="icon-area"> 
				<!--  GOOGLE  ICON , TWITTER ICONS -->
					
				<a href="/login/google?next={{next}}"><i class="fab fa-google-plus-square" style="color : #dd4c39"></i></a>
				<a href="/login/twitter?next={{next}}"><i class="fab fa-twitter-square" style="color : #1da1f2"></i></a>
				<a href="/login/github?next={{next}}"><i class="fab fa-github-square" style="color : #4a4a4a"></i></a>
					
					
					
				</div>
				
				

			</main>




{% endblock %} 

{% block scripts %}
<script src="/static/js/auth.js" type="text/javascript" ></script>
  {% if signup %}
	<script type="text/javascript">
		window.onload = function() {	
			document.getElementById("signup").click();
		};
	</script>
  {% endif %}
{% endblock %}
